<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="success-page">
    <div class="container">
        <!-- Background decorations -->
        <div class="bg-hearts">
            <div class="heart heart-1">üíñ</div>
            <div class="heart heart-2">üíï</div>
            <div class="heart heart-3">üíó</div>
            <div class="heart heart-4">üíù</div>
            <div class="heart heart-5">üíò</div>
        </div>

        <div class="success-content">
            <div class="success-header">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h1 class="success-title">T·∫°o Thi·ªáp Th√†nh C√¥ng!</h1>
                <p class="success-message">Thi·ªáp y√™u th∆∞∆°ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c t·∫°o v√† s·∫µn s√†ng ƒë·ªÉ chia s·∫ª!</p>
            </div>

            <div class="qr-section">
                <h2 class="qr-title">
                    <i class="fas fa-qrcode"></i>
                    M√£ QR Code
                </h2>
                <div class="qr-container">
                    <img src="<%= qrCodeDataURL %>" alt="QR Code" class="qr-image">
                </div>
                <p class="qr-instruction">Qu√©t m√£ QR ƒë·ªÉ xem thi·ªáp y√™u th∆∞∆°ng</p>
            </div>

            <div class="link-section">
                <h2 class="link-title">
                    <i class="fas fa-link"></i>
                    Link Chia S·∫ª
                </h2>
                <div class="link-container">
                    <input type="text" id="giftLink" value="<%= giftUrl %>" readonly class="link-input">
                    <button class="copy-btn" onclick="copyLink()">
                        <i class="fas fa-copy"></i>
                        Sao ch√©p
                    </button>
                </div>
                <p class="link-instruction">Chia s·∫ª link n√†y ƒë·ªÉ ng∆∞·ªùi kh√°c c√≥ th·ªÉ xem thi·ªáp</p>
            </div>

            <div class="preview-section">
                <h2 class="preview-title">
                    <i class="fas fa-eye"></i>
                    Xem Tr∆∞·ªõc Thi·ªáp
                </h2>
                <a href="<%= giftUrl %>" target="_blank" class="preview-btn">
                    <i class="fas fa-external-link-alt"></i>
                    Xem thi·ªáp
                </a>
            </div>

            <div class="action-buttons">
                <a href="/" class="create-another-btn">
                    <i class="fas fa-plus"></i>
                    T·∫°o thi·ªáp kh√°c
                </a>
                <button class="share-btn" onclick="shareGift()">
                    <i class="fas fa-share-alt"></i>
                    Chia s·∫ª ngay
                </button>
            </div>
        </div>
    </div>

    <script>
        function copyLink() {
            const linkInput = document.getElementById('giftLink');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999); // For mobile devices
            
            navigator.clipboard.writeText(linkInput.value).then(() => {
                const copyBtn = document.querySelector('.copy-btn');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> ƒê√£ sao ch√©p!';
                copyBtn.style.backgroundColor = '#4CAF50';
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.backgroundColor = '#ff6b9d';
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                document.execCommand('copy');
                alert('ƒê√£ sao ch√©p link v√†o clipboard!');
            });
        }

        function shareGift() {
            const giftUrl = '<%= giftUrl %>';
            
            if (navigator.share) {
                navigator.share({
                    title: 'Thi·ªáp Y√™u Th∆∞∆°ng - Ng√†y Ph·ª• N·ªØ Vi·ªát Nam',
                    text: 'Xem thi·ªáp y√™u th∆∞∆°ng ƒë∆∞·ª£c t·∫°o cho ng√†y 8/3',
                    url: giftUrl
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(giftUrl).then(() => {
                    alert('ƒê√£ sao ch√©p link v√†o clipboard!');
                });
            }
        }

        // Auto-focus on link input for easy copying
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('giftLink').focus();
        });
    </script>
</body>
</html>

